<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <link rel="stylesheet" href="style.css" />
    <title>Şehirler</title>
  </head>
  <body style="background-color: var(--green-color);">
    <!-- header start -->
    <header class="header">
      <a href="#" class="logo">
        <img src="./img/logo2.png" alt="logo" />
      </a>
      <nav class="navbar">
        <a href="./index.html">Anasayfa</a>
        <a href="#city" class="active">Şehirler</a>
        <a href="./index.html">Hakkımda</a>
        <a href="./index.html">İletişim</a>
      </nav>
      <div class="buttons">
        <button id="search-btn">
          <i class="fa-solid fa-magnifying-glass"></i>
        </button>
        <button id="menu-btn">
          <i class="fas fa-bars"></i>
        </button>
      </div>
      <div class="search-form buttons">
        <input type="text" class="search-input" id="search-box" placeholder="Şehir">
        <i class="fa-solid fa-magnifying-glass" style="color:green"></i>
      </div>

    </header>
    <!-- header end -->
    <!-- presentation start -->
    <section class="presentationImg" id="home">
    </section>
    <section class="presentation">
      <div class="content">
        <h3><span id="cityName">GAZİANTEP</span></h3>
        <p id="cityNameDescription">
          Gezgin ruhunuzu keşfetmek için mükemmel bir zaman! Türkiyeyi keşfetme yolculuğuna çıkmaya hazır olun. İnanılmaz manzaralar, farklı kültürler ve unutulmaz deneyimler sizi bekliyor. Gezinin büyüsüne kapılın, bilinmeyene adım atın ve hayallerinizi gerçeğe dönüştürün. Yeni yerler keşfederek, anılarınıza renk katın ve sınırları zorlayın. Gezgin ruhunuzla dünyanın dört bir yanını keşfetmek için adım atmaya ne dersiniz? Yolculuğunuz başlamak üzere! hadi gezelim
        </p>
      </div>
    </section>
    <!-- presentation end -->
    <!-- cityVisit start-->
    <section class="cityVisitHead2">
      <div class="cityVisitHead">
        Gezilecek Yerler
      </div>
    </section>
    <section id="cityVisit"">
    </section>
    <!-- cityVisit end-->
    <!-- cityFood start -->
    <section class="cityFoodHead">
      Yöresel Yemekler
    </section>
    <section class="cityFood" id="cityFood">
    </section>
    <section class="commentt">
      <div class="commentsTitle">YORUMLAR</div>
      <div id="comments">
      </div>
    </section>
    <section class="userComment">
      <div  id="userComment">
        <form action="">
          <h3>Yorum yapın</h3>
          <div class="inputBox untouchable">
            <i class="fas fa-user "></i>
            <input type="text" placeholder="name" id="userName" />
          </div>
          <div class="inputBox untouchable">
            <i class="fas fa-envelope"></i>
            <input type="email" placeholder="email" id="userEmail" />
          </div>
          <div class="inputBox untouchable">
            <textarea id="userMessage"></textarea>
          </div>
          <button class="btn btn-primary" type="button" onclick="yorumyaz()">Gönder</button>
        </form> 
      </div>
    </section>

    <!-- footer start -->
    <section class="footer">
      <div class="search">
        <input type="text" class="search-input" placeholder="Search" />
        <button class="btn btn-primary">search</button>
      </div>
      <div class="share">
        <a href="#" class="fab fa-instagram"></a>
        <a href="#" class="fab fa-facebook"></a>
        <a href="#" class="fab fa-twitter"></a>
        <a href="#" class="fas fa-envelope"></a>
        <a href="#" class="fab fa-linkedin"></a>
        <a href="#" class="fab fa-pinterest"></a>
      </div>
      <div class="links">
        <a href="#home" class="active">Anasayfa</a>
        <a href="#city">Şehirler</a>
        <a href="#about" ">Hakkımda</a>
        <a href="#contact" >İletişim</a>
      </div>
      <div class="credit">
        Created By <span>Ömer Güneş</span> I All Rigths Reserved
      </div>
    </section>
    <!-- footer end -->
    <script src="app.js"></script>
    <script>
      function yorumyaz(){
        var queryParams = new URLSearchParams(window.location.search);
        var sehir = queryParams.get('sehir');
        let name =document.getElementById("userName").value;
        let email =document.getElementById("userEmail").value;
        let Message =document.getElementById("userMessage").value;
        let date = new Date()
        console.log(name)
        let yorumlar = JSON.parse(localStorage.getItem(sehir) || '[]')
        yorumlar.push({ad: name, mail: email, msg : Message,date:date})
        localStorage.setItem(sehir, JSON.stringify(yorumlar))
        yorumGoster();
        document.getElementById("userName").value="";
        document.getElementById("userEmail").value="";
        document.getElementById("userMessage").value="";
      }
      function yorumGoster(){
        var queryParams = new URLSearchParams(window.location.search);
        var sehir = queryParams.get('sehir');
        let yorumlar = JSON.parse(localStorage.getItem(sehir) || '[]');
            console.log(yorumlar);
            var box3 = document.getElementById("comments");
            box3.innerHTML = "";
            yorumlar.forEach(function (elem) {
              var html = `
                          <div class="comment">
                            <div class="card-body">
                              <p class="commentText">${elem.msg}</p>
                            </div>
                            <div class="card-footer">
                              <h5 class="commentName">${elem.ad}</h5>
                              <small class="text-body-secondary commentDate">${elem.date.slice(0,10).split("-").reverse().join('.')}</small>
                            </div>
                          </div>
                        `;
                box3.innerHTML += html;
              });
      }
      window.onload = function() {
        const xhr = new XMLHttpRequest();
        xhr.open('GET','city.json',true);
        xhr.onload = function () {
          if (this.status === 200) {
            let cityVisit = JSON.parse(this.responseText);
            // Mevcut URL'den URLSearchParams oluşturma
            var queryParams = new URLSearchParams(window.location.search);

            // Belirli bir parametreyi çekme
            var sehir = queryParams.get('sehir');

            let cityName = document.querySelector("#cityName");
            cityName.innerHTML=sehir;
            let cityNameDescription = document.querySelector("#cityNameDescription");
            cityNameDescription.innerHTML = cityVisit[sehir].aciklama;
            var box = document.getElementById("cityVisit");
            cityVisit[sehir].gezilecek_yerler.forEach(function (elem) {
              var html = `
                            <div class="box">
                              <img src="./img/araba.jpg" class="card-img-top" alt="...">
                              <div class="card-body">
                                <h5 class="cityVisitTitle">${elem.ad}</h5>
                                <p class="cityDescription">${elem.aciklama}</p>
                                <div class="map">
                                  <a href="${elem.location}" class="btn btn-primary map">Harita</a>
                                </div>
                              </div>
                            </div>
                        `;
                box.innerHTML += html;
              });
            
            var box2 = document.getElementById("cityFood");
            cityVisit[sehir].yoresel_yemekler.forEach(function(ele){
              var html = `
                      <div class="box2">
                        <img src="./img/araba.jpg" class="card-img-top" alt="...">
                        <div class="card-body">
                          <h5 class="cityFoodTitle">${ele.ad}</h5>
                          <p class="cityFoodDescription">${ele.aciklama}</p>
                        </div>
                      </div>

                        `;
                box2.innerHTML += html;
        
            })
            yorumGoster();
          
          }
          };
        xhr.send();
      };

    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js" integrity="sha384-zYPOMqeu1DAVkHiLqWBUTcbYfZ8osu1Nd6Z89ify25QV9guujx43ITvfi12/QExE" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js" integrity="sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ" crossorigin="anonymous"></script>
  </body>
</html>
